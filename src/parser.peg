%auxil "tb_stack_ref_t"

%source {
#include <stdio.h>
#include <string.h>
}

%header {
#include "common.h"
}

top <- _* list / _* !.

atom <- list / dot / word

list <- '(' { push_open(auxil); } (_* atom)* _* ')' { collect_list(auxil); }

dot <- '.' { push_dot(auxil); } !'.'

word <- [a-zA-Z0-9-]+ { push_atom(auxil, tb_strdup($0)); }

_ <- [ \t\n]

